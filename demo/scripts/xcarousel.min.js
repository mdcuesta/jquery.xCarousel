(function(a){function C(a,b){if(a.length>1){var d=a.shift();d.animate({left:h().width()+"px"},c.scroll_duration);if(a.length==0){if(typeof b=="function")b();return}nextItem=a[0];nextItem.animate({left:(h().width()-nextItem.outerWidth())/2+h().scrollLeft()+"px"},c.scroll_duration,function(){C(a,b)})}else{if(typeof b=="function")b()}}function B(a,b){if(a.length>1){var d=a.shift();d.animate({left:-item.outerWidth()+"px"},c.scroll_duration);if(a.length==0){if(typeof b=="function")b();return}nextItem=a[0];nextItem.animate({left:(h().width()-nextItem.outerWidth())/2+h().scrollLeft()+"px"},c.scroll_duration,function(){B(a,b)})}else{if(typeof b=="function")b()}}function A(b,d){if(b.length>0){var e=b.shift();a(e).animate({top:"-="+h().height()+"px"},c.reverse_fall_duration,function(){A(b,d)})}else{if(typeof d=="function")d()}}function z(a,b){var c=[];var d=a.children();for(i=d.length-1;i>=0;i--){c.push(d[i])}A(c,b)}function y(a,b){if(a.length>0){var d=a.shift();d.animate({top:"+="+h().height()+"px"},c.fall_duration,function(){if(a.length==0){d.effect("bounce",{times:c.bounce_times},c.bounce_duration,function(){if(a.length<1){if(typeof b=="function"){b()}}})}else{d.effect("bounce",{times:c.bounce_times},c.bounce_duration)}y(a,b)})}}function x(b,c){var d=[];b.children().each(function(){d.push(a(this))});y(d,c)}function w(a,b){a.animate({left:(h().width()-a.outerWidth())/2+h().scrollLeft()+"px"},c.scroll_duration,function(){if(typeof b=="function")b()})}function v(a,b){a.css("left",h().width()+"px");w(a,b)}function u(a,b){a.css("left",-a.outerWidth()+"px");w(a,b)}function t(a){a.animate({left:h().width()+"px"},c.scroll_duration)}function s(a){a.animate({left:-a.outerWidth()+"px"},c.scroll_duration)}function r(a){a.css("left",(h().width()-a.outerWidth())/2+h().scrollLeft()+"px");b.push(a)}function q(a){b.push(a);a.css("left","+="+h().width()+"px");a.children().css("top","-="+h().height()+"px")}function p(a){if(b.length==0)r(a);else q(a)}function o(){e--;if(e<0)e=b.length-1}function n(){e++;if(e==b.length)e=0}function m(a){if(a>=b.length)a=a%b.length;return b[a]}function l(){item_index=(b.length+(e+2))%b.length;return m(item_index)}function k(){return b[e]}function j(){item_index=(b.length+(e-2))%b.length;return m(item_index)}function h(){return d.parent()}function g(){return d}var b=new Array;var c={scroll_duration:800,fall_duration:300,reverse_fall_duration:300,bounce_duration:300,bouce_times:300};var d=null;var e=0;var f=0;var D={init:function(b){c=a.extend(c,b);d=a(this);a(this).children("li").each(function(b){p(a(this))})},scrollLeft:function(a){if(f==1)return;f=1;z(k(),function(){t(k());o();u(k(),function(){x(k(),function(){f=0;if(typeof a=="function")a()})})})},scrollRight:function(a){if(f==1)return;f=1;z(k(),function(){s(k());n();v(k(),function(){x(k(),function(){f=0;if(typeof a=="function")a()})})})},scrollToIndex:function(a,c){if(f==1)return;f=1;a=a%b.length;if(e<a){var d=[];d.push(k());for(i=e+1;i<=a;i++){item=m(i);item.css("left",h().width()+"px");d.push(item)}z(k(),function(){e=a;B(d,function(){x(k(),function(){f=0;if(typeof c=="function")c()})})})}else{var d=[];d.push(k());for(i=e-1;i>=a;i--){item=m(i);item.css("left",-item.outerWidth()+"px");d.push(item)}z(k(),function(){e=a;C(d,function(){x(k(),function(){f=0;if(typeof c=="function")c()})})})}},getCurrentSlideIndex:function(){return e}};a.fn.xcarousel=function(b){if(D[b]){return D[b].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof b==="object"||!b){return D.init.apply(this,arguments)}else{a.error("Method "+b+" does not exist on jQuery.xCarousel")}}})(jQuery)